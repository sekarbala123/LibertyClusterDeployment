<server description="WebSphere Liberty Cluster Member 1">

    <featureManager>
        <feature>javaee-8.0</feature>
        <feature>adminCenter-1.0</feature>
        <feature>restConnector-2.0</feature>
        <feature>sessionCache-1.0</feature>
        <feature>collectiveMember-1.0</feature>
    </featureManager>

    <!-- Different ports from controller -->
    <httpEndpoint id="defaultHttpEndpoint"
                  host="*"
                  httpPort="9081"
                  httpsPort="9444" />

    <!-- Quick Start Security for Admin Center -->
    <quickStartSecurity userName="admin" userPassword="adminpwd" />

    <!-- Enable application security -->
    <applicationManager autoExpand="true"/>

    <application type="ear"
                 id="liberty-cluster-app"
                 location="${app.location}"
                 name="liberty-cluster-app"/>

    <!-- Key Store Configuration (auto-generated) -->
    <keyStore id="defaultKeyStore" password="Liberty" />

    <!-- Collective Member Configuration -->
    <collectiveMember>
        <controllerHost>localhost</controllerHost>
        <controllerHttpsPort>9443</controllerHttpsPort>
        <serverIdentity>member1</serverIdentity>
    </collectiveMember>

    <!-- Session Replication Configuration for Clustering -->
    <httpSession cloneId="member1" 
                 cookieName="JSESSIONID"
                 cookiePath="/"
                 invalidateOnUnauthorizedSessionRequestException="true"/>
    
    <!-- JCache session persistence using Hazelcast -->
    <httpSessionCache cacheManagerRef="CacheManager"/>
    
    <cacheManager id="CacheManager">
        <cache id="com.ibm.ws.session.meta.default_host%2Fliberty-cluster-app" 
               name="com.ibm.ws.session.meta.default_host%2Fliberty-cluster-app">
            <cacheLoaderWriter class="com.ibm.ws.session.store.cache.CacheStoreService"/>
        </cache>
        <cache id="com.ibm.ws.session.attr.default_host%2Fliberty-cluster-app"
               name="com.ibm.ws.session.attr.default_host%2Fliberty-cluster-app">
            <cacheLoaderWriter class="com.ibm.ws.session.store.cache.CacheStoreService"/>
        </cache>
    </cacheManager>

</server>

<!-- Made with Bob -->
